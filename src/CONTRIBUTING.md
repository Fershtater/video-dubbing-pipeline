# Участие в разработке Video Dubbing Pipeline

Спасибо за интерес к проекту. Ниже — рекомендации по контрибуции.

## Начало работы

### Требования

- Python 3.11+
- Poetry (управление зависимостями)
- ffmpeg и ffprobe
- Git

### Настройка окружения

1. **Сделайте fork репозитория**

   ```bash
   git clone https://github.com/ваш-логин/video-dubbing-pipeline.git
   cd video-dubbing-pipeline
   ```

2. **Установите зависимости**

   ```bash
   make setup
   # или вручную:
   poetry install
   ```

3. **Настройте окружение**

   ```bash
   cp .env.example .env
   # Заполните .env ключами API
   ```

4. **Запустите тесты**

   ```bash
   make test
   ```

## Рабочий процесс

### Стиль кода

Используются следующие инструменты:

```bash
make fmt        # Форматирование
make lint       # Линтинг
make typecheck  # Проверка типов
make fmt lint typecheck test   # Всё сразу
```

### Тестирование

```bash
make test
poetry run python -m pytest tests/test_конкретный.py
poetry run python -m pytest --cov=dubber tests/
```

### Добавление новой функциональности

1. Создайте ветку: `git checkout -b feature/название-фичи`
2. Вносите изменения, следуя стилю проекта и добавляя тесты
3. Запустите проверки: `make fmt lint typecheck test`
4. Обновите документацию в `docs/`
5. Коммит: `git commit -m "feat: описание изменения"`
6. Push и создание pull request

## Контрибуция в async-часть

При добавлении асинхронной функциональности:

1. Используйте `asyncio`, `httpx` для HTTP, `tqdm[asyncio]` для прогресса
2. Обновите `docs/API_ASYNC.md`, примеры в `docs/ASYNC_EXAMPLES.md`, при необходимости `docs/ASYNC_GUIDE.md`
3. Проверьте разные уровни конкурентности, обработку ошибок и повторы

## Документация

- **README.md** — главная страница проекта
- **docs/ASYNC_GUIDE.md** — руководство по async
- **docs/API_ASYNC.md** — справочник API
- **docs/ASYNC_EXAMPLES.md** — примеры
- **docs/DOCS_INDEX.md** — индекс документации

При добавлении примеров — проверьте их выполнение и обновите связанные документы.

## Pull Request

Перед отправкой:

- [ ] Код соответствует стилю проекта
- [ ] Все тесты проходят
- [ ] Документация обновлена
- [ ] Примеры проверены
- [ ] Линт и проверка типов пройдены

В описании PR укажите: краткое описание, список изменений, как тестировали, обновлённую документацию, влияние на производительность (если есть).

## Сообщение об ошибках

Укажите: ОС и версию Python, шаги воспроизведения, ожидаемое и фактическое поведение, логи и при необходимости примеры файлов.

## Запрос функциональности

Опишите: зачем нужна фича, как она должна работать, рассмотренные альтернативы и при желании идеи по реализации.

## Версионирование

Используется семантическое версионирование (MAJOR.MINOR.PATCH). При релизе обновите версию, CHANGELOG и при необходимости release notes.

## Лицензия

Участвуя в проекте, вы соглашаетесь с лицензированием ваших изменений по MIT License.

Спасибо за вклад в Video Dubbing Pipeline.
